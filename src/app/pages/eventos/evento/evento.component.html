

<div class="container">
    
    <app-boton-back></app-boton-back>

    <p-card *ngIf="evento">
        
        <ng-template pTemplate="header">
            <h1>{{evento.tipo}}-{{evento.numero}} | {{evento.titulo}}</h1>
            <h2>Etapa actual: {{evento.tareaNombre}}</h2>
            <div class="progress">
                <p-progressBar [value]="porcentajeAvance"></p-progressBar>
            </div>
            <div class="mt-2">
                <p-button icon="pi pi-eye" styleClass="p-button-warning" (onClick)="verVidaEvento(evento)"></p-button>
            </div>
        </ng-template>
        <p-divider></p-divider>
        <ng-template pTemplate="body">
            <div class="grid">
                <div class="col">
                    <h4>Cliente</h4>
                    <p>{{evento.cliente.sigla}} - {{evento.cliente.nombre}}</p>
                </div>
                <div class="col">
                    <h4>Producto</h4>
                    <p>{{evento.producto.nombre}} | {{evento.producto.modulo}} - {{evento.producto.submodulo}} - {{evento.producto.entorno}}</p>
                </div>
                <div class="col">
                    <h4>Usuario</h4>
                    <div class="grid">
                        <div class="col">
                            <h5>Actual</h5>
                            <p>{{evento.usuarioActual.usuario}}</p>
                        </div>
                        <div class="col">
                            <h5>Alta</h5>
                            <p>{{evento.usuarioAlta.usuario}}</p>
                        </div>
                    </div>
                </div>
            </div>
        </ng-template>
        
        <ng-template pTemplate="footer">
            <div>
                <!-- <form [formGroup]="comentarioForm" (ngSubmit)="comentar(evento)"> -->
                    <div class="grid">
                        <div class="col-10">
                            <ckeditor [editor]="Editor" [(ngModel)]="comentario"></ckeditor>
                        </div>
                        <div class="col-2">
                            <div class="card flex justify-content-center">
                                <input #adjunto id="adjunto" type="file">
                            </div>
                        </div>
                    </div>
                    <button pButton type="submit" pRipple label="Comentar" class="p-button-success"style="margin-top:10px;" (click)="comentar(evento)"></button>
                <!-- </form> -->
            </div>
        </ng-template>
    </p-card>
</div>

<div style="margin: 20px 100px;">
    <p-card>
        <ng-container *ngFor="let comentario of comentarios" class="mt-5">
            <app-comentario [comentario]="comentario"></app-comentario>
        </ng-container>
    </p-card>
</div>